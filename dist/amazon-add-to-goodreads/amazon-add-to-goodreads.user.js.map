{
  "version": 3,
  "sources": ["../../src/main/amazon-add-to-goodreads/amazon-add-to-goodreads.user.ts"],
  "sourcesContent": ["// ==UserScript==\n// @name         Amazon - Add to Goodreads widget\n// @namespace    bricemciver\n// @description  Places an \"Add to Goodreads\" widget on Amazon book pages\n// @author       Brice McIver\n// @license      MIT\n// @version      0.0.5\n// @match        https://amazon.com/*\n// @match        https://*.amazon.com/*\n// @match        https://amazon.co.uk/*\n// @match        https://*.amazon.co.uk/*\n// @match        https://amazon.ca/*\n// @match        https://*.amazon.ca/*\n// @match        https://amazon.de/*\n// @match        https://*.amazon.de/*\n// @match        https://amazon.fr/*\n// @match        https://*.amazon.fr/*\n// @match        https://amazon.es/*\n// @match        https://*.amazon.es/*\n// @match        https://amazon.it/*\n// @match        https://*.amazon.it/*\n// @match        https://amazon.co.jp/*\n// @match        https://*.amazon.co.jp/*\n// @match        https://amazon.cn/*\n// @match        https://*.amazon.cn/*\n// @match        https://amazon.com.br/*\n// @match        https://*.amazon.com.br/*\n// @match        https://amazon.in/*\n// @match        https://*.amazon.in/*\n// @match        https://amazon.com.mx/*\n// @match        https://*.amazon.com.mx/*\n// @match        https://amazon.com.au/*\n// @match        https://*.amazon.com.au/*\n// @grant        none\n// @icon         https://www.google.com/s2/favicons?sz=64&domain=amazon.com\n// ==/UserScript==\n\nconst asinRegex = /\\/([A-Z0-9]{10})/;\n\nconst findASIN = (): string => {\n  const array = asinRegex.exec(document.location.pathname);\n  const asin = array && array.length > 1 ? array[1] : '';\n  // eslint-disable-next-line no-console\n  console.log(`ASIN in pathname: ${asin}`);\n  // determine if book\n  const dp = document.getElementById('dp');\n  return dp?.className.includes('book') ? asin : '';\n};\n\nconst findInsertPoint = (): HTMLElement | null => document.getElementById('averageCustomerReviews');\n\nconst insertElement = (isbn: string, insertPoint: Element): void => {\n  const elem = document.createElement('div');\n  elem.id = 'gr_add_to_books';\n  elem.innerHTML = [\n    '<div class=\"gr_custom_each_container_\">',\n    '<a target=\"_blank\" style=\"border:none\" rel=\"nofollow noopener noreferrer\" href=\"https://www.goodreads.com/book/isbn/',\n    isbn,\n    '\"><img src=\"https://www.goodreads.com/images/atmb_add_book-70x25.png\" /></a>',\n    '</div>',\n  ].join('');\n  const script = document.createElement('script');\n  script.src = 'https://www.goodreads.com/book/add_to_books_widget_frame/' + isbn + '?atmb_widget%5Glutton%5D=atmb_widget_1.png';\n  insertPoint.appendChild(elem);\n  insertPoint.appendChild(script);\n};\n\nconst main = (): void => {\n  const ASIN = findASIN();\n  const insertPoint = findInsertPoint();\n  if (ASIN && insertPoint) {\n    insertElement(ASIN, insertPoint);\n  }\n};\n\nmain();\n"],
  "mappings": ";;;AAqCA,MAAM,YAAY;AAElB,MAAM,WAAW,MAAc;AAC7B,UAAM,QAAQ,UAAU,KAAK,SAAS,SAAS,QAAQ;AACvD,UAAM,OAAO,SAAS,MAAM,SAAS,IAAI,MAAM,CAAC,IAAI;AAEpD,YAAQ,IAAI,qBAAqB,IAAI,EAAE;AAEvC,UAAM,KAAK,SAAS,eAAe,IAAI;AACvC,WAAO,IAAI,UAAU,SAAS,MAAM,IAAI,OAAO;AAAA,EACjD;AAEA,MAAM,kBAAkB,MAA0B,SAAS,eAAe,wBAAwB;AAElG,MAAM,gBAAgB,CAAC,MAAc,gBAA+B;AAClE,UAAM,OAAO,SAAS,cAAc,KAAK;AACzC,SAAK,KAAK;AACV,SAAK,YAAY;AAAA,MACf;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,EAAE,KAAK,EAAE;AACT,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,MAAM,8DAA8D,OAAO;AAClF,gBAAY,YAAY,IAAI;AAC5B,gBAAY,YAAY,MAAM;AAAA,EAChC;AAEA,MAAM,OAAO,MAAY;AACvB,UAAM,OAAO,SAAS;AACtB,UAAM,cAAc,gBAAgB;AACpC,QAAI,QAAQ,aAAa;AACvB,oBAAc,MAAM,WAAW;AAAA,IACjC;AAAA,EACF;AAEA,OAAK;",
  "names": []
}
