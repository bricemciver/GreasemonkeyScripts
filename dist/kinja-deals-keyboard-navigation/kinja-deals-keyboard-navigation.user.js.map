{
  "version": 3,
  "sources": ["../../src/main/kinja-deals-keyboard-navigation/kinja-deals-keyboard-navigation.user.ts"],
  "sourcesContent": ["(() => {\n  const headTags: Element[] = [];\n  let pos = -1;\n\n  const addGlobalStyle = (css: string): void => {\n    const head = document.getElementsByTagName('head')[0];\n    const style = document.createElement('style');\n    style.innerHTML = css;\n    head.appendChild(style);\n  };\n\n  const keyPressed = (event: KeyboardEvent): void => {\n    if (event.code === 'KeyK' || event.code === 'KeyJ') {\n      if (headTags[pos]) {\n        headTags[pos].className = headTags[pos].className.replace(' selected', '');\n      }\n      if ('KeyK' === event.code) {\n        pos--;\n      }\n      if ('KeyJ' === event.code) {\n        pos++;\n      }\n      // wrap around\n      if (pos >= headTags.length) {\n        pos = 0;\n      }\n      if (pos < 0) {\n        pos = headTags.length - 1;\n      }\n      headTags[pos].className = headTags[pos].className + ' selected';\n      headTags[pos].scrollIntoView();\n    }\n  };\n\n  const removeCruft = (): void => {\n    document.querySelectorAll('.js_movable_ad_slot').forEach(element => element.remove());\n    document.querySelectorAll('.connatix-container').forEach(element => element.remove());\n    Array.from(document.getElementsByTagName('span'))\n      .filter(item => item.textContent === 'G/O Media may get a commission')\n      .forEach(element => element.closest('aside')?.remove());\n    document.querySelectorAll('#sidebar_wrapper').forEach(element => element.closest('aside')?.remove());\n  };\n\n  const createEntries = (containerDiv: Element): void => {\n    let newElement: Element | null = null;\n    Array.from(containerDiv.children).forEach(element => {\n      // this is the beginning or end or a section\n      if (element.tagName === 'H2' && element.textContent?.length && element.textContent.length > 0) {\n        newElement = document.createElement('div');\n        newElement.className = 'inlineFrame';\n        element.insertAdjacentElement('beforebegin', newElement);\n        newElement.append(element);\n      } else if (newElement) {\n        newElement.append(element);\n      }\n    });\n  };\n\n  const addListeners = (containerDiv: Element): void => {\n    // get all section headers\n    headTags.push(containerDiv);\n    headTags.push(...Array.from(containerDiv.querySelectorAll('div.inlineFrame, h3, h4')));\n    document.addEventListener('keydown', keyPressed);\n  };\n\n  // remove unneeded content\n  removeCruft();\n\n  // find main content\n  const mainDiv = document.querySelector('.js_post-content .js_commerce-inset-grid');\n  if (mainDiv) {\n    // add necessary styles\n    addGlobalStyle(\n      'div.inlineFrame { margin-top:17px; margin-bottom:17px; padding:33px; border-radius:3px; border: 1px solid rgba(0,0,0,0.05) }',\n    );\n    addGlobalStyle('div.inlineFrame.selected { border: 1px solid rgba(0, 0, 0, 0.15) }');\n    addGlobalStyle('main { width:100% !important }');\n\n    if (mainDiv.parentElement) {\n      // create entries\n      createEntries(mainDiv.parentElement);\n\n      // add keyboard navigation\n      addListeners(mainDiv.parentElement);\n    }\n  }\n})();\n"],
  "mappings": ";;;;AAAA,GAAC,MAAM;AACL,UAAM,WAAsB,CAAC;AAC7B,QAAI,MAAM;AAEV,UAAM,iBAAiB,CAAC,QAAsB;AAC5C,YAAM,OAAO,SAAS,qBAAqB,MAAM,EAAE,CAAC;AACpD,YAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,YAAM,YAAY;AAClB,WAAK,YAAY,KAAK;AAAA,IACxB;AAEA,UAAM,aAAa,CAAC,UAA+B;AACjD,UAAI,MAAM,SAAS,UAAU,MAAM,SAAS,QAAQ;AAClD,YAAI,SAAS,GAAG,GAAG;AACjB,mBAAS,GAAG,EAAE,YAAY,SAAS,GAAG,EAAE,UAAU,QAAQ,aAAa,EAAE;AAAA,QAC3E;AACA,YAAI,WAAW,MAAM,MAAM;AACzB;AAAA,QACF;AACA,YAAI,WAAW,MAAM,MAAM;AACzB;AAAA,QACF;AAEA,YAAI,OAAO,SAAS,QAAQ;AAC1B,gBAAM;AAAA,QACR;AACA,YAAI,MAAM,GAAG;AACX,gBAAM,SAAS,SAAS;AAAA,QAC1B;AACA,iBAAS,GAAG,EAAE,YAAY,SAAS,GAAG,EAAE,YAAY;AACpD,iBAAS,GAAG,EAAE,eAAe;AAAA,MAC/B;AAAA,IACF;AAEA,UAAM,cAAc,MAAY;AAC9B,eAAS,iBAAiB,qBAAqB,EAAE,QAAQ,aAAW,QAAQ,OAAO,CAAC;AACpF,eAAS,iBAAiB,qBAAqB,EAAE,QAAQ,aAAW,QAAQ,OAAO,CAAC;AACpF,YAAM,KAAK,SAAS,qBAAqB,MAAM,CAAC,EAC7C,OAAO,UAAQ,KAAK,gBAAgB,gCAAgC,EACpE,QAAQ,aAAQ;AAvCvB;AAuC0B,6BAAQ,QAAQ,OAAO,MAAvB,mBAA0B;AAAA,OAAQ;AACxD,eAAS,iBAAiB,kBAAkB,EAAE,QAAQ,aAAQ;AAxClE;AAwCqE,6BAAQ,QAAQ,OAAO,MAAvB,mBAA0B;AAAA,OAAQ;AAAA,IACrG;AAEA,UAAM,gBAAgB,CAAC,iBAAgC;AACrD,UAAI,aAA6B;AACjC,YAAM,KAAK,aAAa,QAAQ,EAAE,QAAQ,aAAW;AA7CzD;AA+CM,YAAI,QAAQ,YAAY,UAAQ,aAAQ,gBAAR,mBAAqB,WAAU,QAAQ,YAAY,SAAS,GAAG;AAC7F,uBAAa,SAAS,cAAc,KAAK;AACzC,qBAAW,YAAY;AACvB,kBAAQ,sBAAsB,eAAe,UAAU;AACvD,qBAAW,OAAO,OAAO;AAAA,QAC3B,WAAW,YAAY;AACrB,qBAAW,OAAO,OAAO;AAAA,QAC3B;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,CAAC,iBAAgC;AAEpD,eAAS,KAAK,YAAY;AAC1B,eAAS,KAAK,GAAG,MAAM,KAAK,aAAa,iBAAiB,yBAAyB,CAAC,CAAC;AACrF,eAAS,iBAAiB,WAAW,UAAU;AAAA,IACjD;AAGA,gBAAY;AAGZ,UAAM,UAAU,SAAS,cAAc,0CAA0C;AACjF,QAAI,SAAS;AAEX;AAAA,QACE;AAAA,MACF;AACA,qBAAe,oEAAoE;AACnF,qBAAe,gCAAgC;AAE/C,UAAI,QAAQ,eAAe;AAEzB,sBAAc,QAAQ,aAAa;AAGnC,qBAAa,QAAQ,aAAa;AAAA,MACpC;AAAA,IACF;AAAA,EACF,GAAG;",
  "names": []
}
