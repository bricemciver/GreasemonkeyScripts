{
  "version": 3,
  "sources": ["../../src/main/kinja-deals-keyboard-navigation/kinja-deals-keyboard-navigation.user.ts"],
  "sourcesContent": ["namespace KinjaDealsKeyboardNavigation {\n  const headTags: Element[] = []\n  let pos = -1\n\n  const addGlobalStyle = (css: string): void => {\n    const head = document.getElementsByTagName('head')[0]\n    const style = document.createElement('style')\n    style.innerHTML = css\n    head.appendChild(style)\n  }\n\n  const keyPressed = (event: KeyboardEvent): void => {\n    if (event.code === 'KeyK' || event.code === 'KeyJ') {\n      if (headTags[pos]) {\n        headTags[pos].className = headTags[pos].className.replace(' selected', '')\n      }\n      if ('KeyK' === event.code) {\n        pos--\n      }\n      if ('KeyJ' === event.code) {\n        pos++\n      }\n      // wrap around\n      if (pos >= headTags.length) {\n        pos = 0\n      }\n      if (pos < 0) {\n        pos = headTags.length - 1\n      }\n      headTags[pos].className = `${headTags[pos].className} selected`\n      headTags[pos].scrollIntoView()\n    }\n  }\n\n  export const removeCruft = (): void => {\n    for (const element of document.querySelectorAll('.js_movable_ad_slot')) {\n      element.remove()\n    }\n    for (const element of document.querySelectorAll('.connatix-container')) {\n      element.remove()\n    }\n    for (const element of Array.from(document.getElementsByTagName('span')).filter(\n      item => item.textContent === 'G/O Media may get a commission',\n    )) {\n      element.closest('aside')?.remove()\n    }\n    for (const element of document.querySelectorAll('#sidebar_wrapper')) {\n      element.closest('aside')?.remove()\n    }\n  }\n\n  const createEntries = (containerDiv: Element): void => {\n    let newElement: Element | null = null\n    for (const element of Array.from(containerDiv.children)) {\n      // this is the beginning or end or a section\n      if (element.tagName === 'H2' && element.textContent?.length && element.textContent.length > 0) {\n        newElement = document.createElement('div')\n        newElement.className = 'inlineFrame'\n        element.insertAdjacentElement('beforebegin', newElement)\n        newElement.append(element)\n      } else if (newElement) {\n        newElement.append(element)\n      }\n    }\n  }\n\n  const addListeners = (containerDiv: Element): void => {\n    // get all section headers\n    headTags.push(containerDiv)\n    headTags.push(...Array.from(containerDiv.querySelectorAll('div.inlineFrame, h3, h4')))\n    document.addEventListener('keydown', keyPressed)\n  }\n\n  export const main = () => {\n    // find main content\n    const mainDiv = document.querySelector('.js_post-content .js_commerce-inset-grid')\n    if (mainDiv) {\n      // add necessary styles\n      addGlobalStyle(\n        'div.inlineFrame { margin-top:17px; margin-bottom:17px; padding:33px; border-radius:3px; border: 1px solid rgba(0,0,0,0.05) }',\n      )\n      addGlobalStyle('div.inlineFrame.selected { border: 1px solid rgba(0, 0, 0, 0.15) }')\n      addGlobalStyle('main { width:100% !important }')\n\n      if (mainDiv.parentElement) {\n        // create entries\n        createEntries(mainDiv.parentElement)\n\n        // add keyboard navigation\n        addListeners(mainDiv.parentElement)\n      }\n    }\n  }\n}\n// remove unneeded content\nKinjaDealsKeyboardNavigation.removeCruft()\nKinjaDealsKeyboardNavigation.main()\n"],
  "mappings": ";;;;AAAA,MAAU;AAAV,IAAUA,kCAAV;AACE,UAAM,WAAsB,CAAC;AAC7B,QAAI,MAAM;AAEV,UAAM,iBAAiB,CAAC,QAAsB;AAC5C,YAAM,OAAO,SAAS,qBAAqB,MAAM,EAAE,CAAC;AACpD,YAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,YAAM,YAAY;AAClB,WAAK,YAAY,KAAK;AAAA,IACxB;AAEA,UAAM,aAAa,CAAC,UAA+B;AACjD,UAAI,MAAM,SAAS,UAAU,MAAM,SAAS,QAAQ;AAClD,YAAI,SAAS,GAAG,GAAG;AACjB,mBAAS,GAAG,EAAE,YAAY,SAAS,GAAG,EAAE,UAAU,QAAQ,aAAa,EAAE;AAAA,QAC3E;AACA,YAAI,WAAW,MAAM,MAAM;AACzB;AAAA,QACF;AACA,YAAI,WAAW,MAAM,MAAM;AACzB;AAAA,QACF;AAEA,YAAI,OAAO,SAAS,QAAQ;AAC1B,gBAAM;AAAA,QACR;AACA,YAAI,MAAM,GAAG;AACX,gBAAM,SAAS,SAAS;AAAA,QAC1B;AACA,iBAAS,GAAG,EAAE,YAAY,GAAG,SAAS,GAAG,EAAE,SAAS;AACpD,iBAAS,GAAG,EAAE,eAAe;AAAA,MAC/B;AAAA,IACF;AAEO,IAAMA,8BAAA,cAAc,MAAY;AAlCzC;AAmCI,iBAAW,WAAW,SAAS,iBAAiB,qBAAqB,GAAG;AACtE,gBAAQ,OAAO;AAAA,MACjB;AACA,iBAAW,WAAW,SAAS,iBAAiB,qBAAqB,GAAG;AACtE,gBAAQ,OAAO;AAAA,MACjB;AACA,iBAAW,WAAW,MAAM,KAAK,SAAS,qBAAqB,MAAM,CAAC,EAAE;AAAA,QACtE,UAAQ,KAAK,gBAAgB;AAAA,MAC/B,GAAG;AACD,sBAAQ,QAAQ,OAAO,MAAvB,mBAA0B;AAAA,MAC5B;AACA,iBAAW,WAAW,SAAS,iBAAiB,kBAAkB,GAAG;AACnE,sBAAQ,QAAQ,OAAO,MAAvB,mBAA0B;AAAA,MAC5B;AAAA,IACF;AAEA,UAAM,gBAAgB,CAAC,iBAAgC;AAnDzD;AAoDI,UAAI,aAA6B;AACjC,iBAAW,WAAW,MAAM,KAAK,aAAa,QAAQ,GAAG;AAEvD,YAAI,QAAQ,YAAY,UAAQ,aAAQ,gBAAR,mBAAqB,WAAU,QAAQ,YAAY,SAAS,GAAG;AAC7F,uBAAa,SAAS,cAAc,KAAK;AACzC,qBAAW,YAAY;AACvB,kBAAQ,sBAAsB,eAAe,UAAU;AACvD,qBAAW,OAAO,OAAO;AAAA,QAC3B,WAAW,YAAY;AACrB,qBAAW,OAAO,OAAO;AAAA,QAC3B;AAAA,MACF;AAAA,IACF;AAEA,UAAM,eAAe,CAAC,iBAAgC;AAEpD,eAAS,KAAK,YAAY;AAC1B,eAAS,KAAK,GAAG,MAAM,KAAK,aAAa,iBAAiB,yBAAyB,CAAC,CAAC;AACrF,eAAS,iBAAiB,WAAW,UAAU;AAAA,IACjD;AAEO,IAAMA,8BAAA,OAAO,MAAM;AAExB,YAAM,UAAU,SAAS,cAAc,0CAA0C;AACjF,UAAI,SAAS;AAEX;AAAA,UACE;AAAA,QACF;AACA,uBAAe,oEAAoE;AACnF,uBAAe,gCAAgC;AAE/C,YAAI,QAAQ,eAAe;AAEzB,wBAAc,QAAQ,aAAa;AAGnC,uBAAa,QAAQ,aAAa;AAAA,QACpC;AAAA,MACF;AAAA,IACF;AAAA,KA5FQ;AA+FV,+BAA6B,YAAY;AACzC,+BAA6B,KAAK;",
  "names": ["KinjaDealsKeyboardNavigation"]
}
