{
  "version": 3,
  "sources": ["../../src/main/equip-bid-keyboard-navigation/equip-bid-keyboard-navigation.user.ts"],
  "sourcesContent": ["const indexAction = (action: 'plus' | 'minus'): void => {\n  // auto page navigation\n  if (index === 0 && prevLink && action === 'minus') {\n    // go to previous page (if available)\n    prevLink.click();\n  } else if (index > lots.length - 2 && nextLink && action === 'plus') {\n    // go to next page (if available)\n    nextLink.click();\n  } else if (action === 'plus') {\n    lots[index].classList.toggle('selected_lot', false);\n    index++;\n    lots[index].classList.toggle('selected_lot', true);\n    lots[index].scrollIntoView({\n      block: 'center',\n    });\n  } else if (action === 'minus') {\n    lots[index].classList.toggle('selected_lot', false);\n    index--;\n    lots[index].classList.toggle('selected_lot', true);\n    lots[index].scrollIntoView({\n      block: 'center',\n    });\n  }\n};\n\nconst addToWatchList = (): void => {\n  // find the right watchlist button\n  const watchlistButton = lots[index].querySelector<HTMLAnchorElement>('a.item-watch-up');\n  if (watchlistButton) {\n    watchlistButton.click();\n  }\n};\n\nconst openInNewTab = (): void => {\n  // find the url\n  const url = lots[index].getAttribute('data-url');\n  if (url) {\n    window.open(url, '_blank');\n  }\n};\n\nconst showHelp = (): void => {\n  document.querySelector<HTMLDialogElement>('dialog.ShortcutsHelp')?.showModal();\n};\n\nconst hideHelp = (): void => {\n  document.querySelector<HTMLDialogElement>('dialog.ShortcutsHelp')?.close();\n};\n\nconst createHelp = (): HTMLDialogElement => {\n  const helpDiv = document.createElement('dialog');\n  helpDiv.classList.add('ShortcutsHelp');\n  const hintDiv = document.createElement('div');\n  hintDiv.classList.add('ShortcutsHelp__hint');\n  hintDiv.insertAdjacentText('afterbegin', 'ESC to close');\n  const title = document.createElement('div');\n  title.classList.add('ShortcutsHelp__title');\n  title.insertAdjacentText('afterbegin', 'Keyboard Shortcuts Help');\n  helpDiv.appendChild(hintDiv);\n  helpDiv.appendChild(title);\n  helpTopics.forEach(topic => {\n    const section = document.createElement('div');\n    section.classList.add('ShortcutsHelp__section');\n    const sectionTitle = document.createElement('div');\n    sectionTitle.classList.add('ShortcutsHelp__section-title');\n    sectionTitle.insertAdjacentText('afterbegin', topic.section);\n    section.appendChild(sectionTitle);\n    helpDiv.appendChild(section);\n    topic.items.forEach(item => {\n      const itemDiv = document.createElement('div');\n      const itemKey = document.createElement('span');\n      itemKey.classList.add('ShortcutsHelp__shortcut');\n      itemKey.insertAdjacentText('afterbegin', item.key);\n      const itemValue = document.createTextNode(item.description);\n      itemDiv.appendChild(itemKey);\n      itemDiv.appendChild(itemValue);\n      section.appendChild(itemDiv);\n    });\n  });\n  return helpDiv;\n};\n\nconst initScript = (): void => {\n  // load new styles\n  const head = document.getElementsByTagName('head')[0];\n  const style = document.createElement('style');\n  style.setAttribute('type', 'text/css');\n  head.appendChild(style);\n  if (style.sheet) {\n    style.sheet.insertRule(`.ShortcutsHelp {\n        animation: shortcuts-help-fade-in .25s ease-in-out;\n        background-color: #111;\n        border-radius: .25rem;\n        color: #fff;\n        font-size: 1.25rem;\n        left: 50%;\n        line-height: 17px;\n        padding: 20px;\n        position: absolute;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        width: 350px;\n        z-index: 99999\n    }`);\n    style.sheet.insertRule(`.ShortcutsHelp__title {\n      border-bottom: 1px solid #444;\n      color: #999;\n      font-weight: 700;\n      margin-bottom: 9px;\n      padding-bottom: 9px\n  }`);\n    style.sheet.insertRule(`.ShortcutsHelp__hint {\n    color: #999;\n    float: right;\n}`);\n    style.sheet.insertRule(`.ShortcutsHelp__section {\n    margin-bottom: 17px;\n    margin-top: 0\n}`);\n    style.sheet.insertRule(`.ShortcutsHelp__section-title {\n    color: #999;\n    margin-bottom: 8px;\n    margin-top: 9px\n}`);\n    style.sheet.insertRule(`.ShortcutsHelp__shortcut {\n    color: #2bb24c;\n    display: inline-block;\n    padding-right: 6px;\n    width: 55px\n}`);\n    style.sheet.insertRule(`@keyframes shortcuts-help-fade-in {\n    from {\n        opacity: 0\n    }\n\n    to {\n        opacity: 1\n    }\n}`);\n    style.sheet.insertRule(`@keyframes shortcuts-help-fade-out {\n    from {\n        opacity: 1\n    }\n\n    to {\n        opacity: 0\n    }\n}`);\n    style.sheet.insertRule(`.lot {\n    margin-bottom: 34px;\n    min-height: 136px;\n    padding: 33px;\n    color: #333;\n    border: 1px solid rgba(0,0,0,.05);\n    border-radius: 3px;\n    position: relative;\n    z-index: 2\n}`);\n    style.sheet.insertRule(`.selected_lot {\n      outline: 5px auto -webkit-focus-ring-color;\n      outline-offset: -2px\n}`);\n  }\n\n  // create help div\n  const helpDiv = createHelp();\n\n  // attach to body\n  document.body.appendChild(helpDiv);\n\n  if (lotList) {\n    makeLotItemsIntoCards(lotList);\n  }\n};\n\ntype HelpTopic = {\n  section: string;\n  items: { key: string; description: string }[];\n};\n\nconst makeLotItemsIntoCards = (lotList: HTMLDivElement) => {\n  let newNode: HTMLDivElement | null = null;\n  // copy list of children\n  const children = Array.from(lotList.children);\n  for (let i = 4; i < children.length; i++) {\n    // find blocks of divs we want to enclose\n    // search backwards to avoid out of index\n    const row1 = children[i - 4];\n    const row2 = children[i - 3];\n    const row3 = children[i - 2];\n    const row4 = children[i - 1];\n    const row5 = children[i];\n    if (\n      row1.classList.contains('row') &&\n      row2.classList.contains('row') &&\n      row3.classList.contains('row') &&\n      row4.classList.contains('hidden-md') &&\n      row5.classList.contains('hidden-xs')\n    ) {\n      // we found our block\n      newNode = document.createElement('div');\n      newNode.classList.add('lot');\n      children.splice(i - 4, 5, newNode);\n      newNode.append(row1, row2, row3);\n      i = i - 4;\n    }\n  }\n  // replace lotlist children with new list\n  lotList.replaceChildren(...children);\n  lots = Array.from(document.querySelectorAll<HTMLDivElement>('div.lot'));\n};\n\nconst lotList = document.querySelector<HTMLDivElement>('div.lot-list');\nlet lots: HTMLDivElement[] = [];\nconst prevLink = document.querySelector<HTMLLIElement>('li.previous a');\nconst nextLink = document.querySelector<HTMLLIElement>('li.next a');\nconst helpTopics: HelpTopic[] = [\n  { section: '', items: [{ key: '?', description: 'Keyboard shortcuts' }] },\n  {\n    section: 'Auction items',\n    items: [\n      { key: 'j', description: 'Scroll to next auction item' },\n      { key: 'k', description: 'Scroll to previous auction item' },\n    ],\n  },\n  {\n    section: 'Selected item',\n    items: [\n      { key: 'w', description: 'Add item to watchlist' },\n      { key: 'v', description: 'Open item in a new tab' },\n    ],\n  },\n];\nlet index = 0;\n\nwindow.addEventListener('keydown', event => {\n  if (event.code === 'KeyJ') {\n    indexAction('plus');\n  }\n  if (event.code === 'KeyK') {\n    indexAction('minus');\n  }\n  if (event.code === 'KeyW') {\n    addToWatchList();\n  }\n  if (event.code === 'KeyV') {\n    openInNewTab();\n  }\n  if (event.code === 'Slash' && event.shiftKey) {\n    showHelp();\n  }\n  if (event.code === 'Escape') {\n    hideHelp();\n  }\n});\n\ninitScript();\n"],
  "mappings": "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",
  "names": ["lotList"]
}
