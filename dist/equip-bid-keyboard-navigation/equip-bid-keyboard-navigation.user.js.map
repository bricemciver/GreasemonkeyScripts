{
  "version": 3,
  "sources": ["../../src/main/equip-bid-keyboard-navigation/equip-bid-keyboard-navigation.user.ts"],
  "sourcesContent": ["namespace EquipBidKeyboardNavigation {\n  const indexAction = (action: 'plus' | 'minus'): void => {\n    // auto page navigation\n    if (index === 0 && prevLink && action === 'minus') {\n      // go to previous page (if available)\n      prevLink.click()\n    } else if (index > lots.length - 2 && nextLink && action === 'plus') {\n      // go to next page (if available)\n      nextLink.click()\n    } else if (action === 'plus') {\n      lots[index].classList.toggle('selected_lot', false)\n      index++\n      lots[index].classList.toggle('selected_lot', true)\n      lots[index].scrollIntoView({\n        block: 'center',\n      })\n    } else if (action === 'minus') {\n      lots[index].classList.toggle('selected_lot', false)\n      index--\n      lots[index].classList.toggle('selected_lot', true)\n      lots[index].scrollIntoView({\n        block: 'center',\n      })\n    }\n  }\n\n  const addToWatchList = (): void => {\n    // find the right watchlist button\n    const watchlistButton = lots[index].querySelector<HTMLAnchorElement>('a.item-watch-up')\n    if (watchlistButton) {\n      watchlistButton.click()\n    }\n  }\n\n  const openInNewTab = (): void => {\n    // find the url\n    const url = lots[index].getAttribute('data-url')\n    if (url) {\n      window.open(url, '_blank')\n    }\n  }\n\n  const showHelp = (): void => {\n    document.querySelector<HTMLDialogElement>('dialog.ShortcutsHelp')?.showModal()\n  }\n\n  const hideHelp = (): void => {\n    document.querySelector<HTMLDialogElement>('dialog.ShortcutsHelp')?.close()\n  }\n\n  const createHelp = (): HTMLDialogElement => {\n    const helpDiv = document.createElement('dialog')\n    helpDiv.classList.add('ShortcutsHelp')\n    const hintDiv = document.createElement('div')\n    hintDiv.classList.add('ShortcutsHelp__hint')\n    hintDiv.insertAdjacentText('afterbegin', 'ESC to close')\n    const title = document.createElement('div')\n    title.classList.add('ShortcutsHelp__title')\n    title.insertAdjacentText('afterbegin', 'Keyboard Shortcuts Help')\n    helpDiv.appendChild(hintDiv)\n    helpDiv.appendChild(title)\n    helpTopics.forEach(topic => {\n      const section = document.createElement('div')\n      section.classList.add('ShortcutsHelp__section')\n      const sectionTitle = document.createElement('div')\n      sectionTitle.classList.add('ShortcutsHelp__section-title')\n      sectionTitle.insertAdjacentText('afterbegin', topic.section)\n      section.appendChild(sectionTitle)\n      helpDiv.appendChild(section)\n      topic.items.forEach(item => {\n        const itemDiv = document.createElement('div')\n        const itemKey = document.createElement('span')\n        itemKey.classList.add('ShortcutsHelp__shortcut')\n        itemKey.insertAdjacentText('afterbegin', item.key)\n        const itemValue = document.createTextNode(item.description)\n        itemDiv.appendChild(itemKey)\n        itemDiv.appendChild(itemValue)\n        section.appendChild(itemDiv)\n      })\n    })\n    return helpDiv\n  }\n\n  export const initScript = (): void => {\n    // load new styles\n    const head = document.getElementsByTagName('head')[0]\n    const style = document.createElement('style')\n    style.setAttribute('type', 'text/css')\n    head.appendChild(style)\n    if (style.sheet) {\n      style.sheet.insertRule(`.ShortcutsHelp {\n        animation: shortcuts-help-fade-in .25s ease-in-out;\n        background-color: #111;\n        border-radius: .25rem;\n        color: #fff;\n        font-size: 1.25rem;\n        left: 50%;\n        line-height: 17px;\n        padding: 20px;\n        position: absolute;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        width: 350px;\n        z-index: 99999\n    }`)\n      style.sheet.insertRule(`.ShortcutsHelp__title {\n      border-bottom: 1px solid #444;\n      color: #999;\n      font-weight: 700;\n      margin-bottom: 9px;\n      padding-bottom: 9px\n  }`)\n      style.sheet.insertRule(`.ShortcutsHelp__hint {\n    color: #999;\n    float: right;\n}`)\n      style.sheet.insertRule(`.ShortcutsHelp__section {\n    margin-bottom: 17px;\n    margin-top: 0\n}`)\n      style.sheet.insertRule(`.ShortcutsHelp__section-title {\n    color: #999;\n    margin-bottom: 8px;\n    margin-top: 9px\n}`)\n      style.sheet.insertRule(`.ShortcutsHelp__shortcut {\n    color: #2bb24c;\n    display: inline-block;\n    padding-right: 6px;\n    width: 55px\n}`)\n      style.sheet.insertRule(`@keyframes shortcuts-help-fade-in {\n    from {\n        opacity: 0\n    }\n\n    to {\n        opacity: 1\n    }\n}`)\n      style.sheet.insertRule(`@keyframes shortcuts-help-fade-out {\n    from {\n        opacity: 1\n    }\n\n    to {\n        opacity: 0\n    }\n}`)\n      style.sheet.insertRule(`.lot {\n    margin-bottom: 34px;\n    min-height: 136px;\n    padding: 33px;\n    color: #333;\n    border: 1px solid rgba(0,0,0,.05);\n    border-radius: 3px;\n    position: relative;\n    z-index: 2\n}`)\n      style.sheet.insertRule(`.selected_lot {\n      outline: 5px auto -webkit-focus-ring-color;\n      outline-offset: -2px\n}`)\n    }\n\n    // create help div\n    const helpDiv = createHelp()\n\n    // attach to body\n    document.body.appendChild(helpDiv)\n\n    if (lotList) {\n      makeLotItemsIntoCards(lotList)\n    }\n  }\n\n  type HelpTopic = {\n    section: string\n    items: { key: string; description: string }[]\n  }\n\n  const makeLotItemsIntoCards = (lotList: HTMLDivElement) => {\n    let newNode: HTMLDivElement | null = null\n    // copy list of children\n    const children = Array.from(lotList.children)\n    for (let i = 4; i < children.length; i++) {\n      // find blocks of divs we want to enclose\n      // search backwards to avoid out of index\n      const row1 = children[i - 4]\n      const row2 = children[i - 3]\n      const row3 = children[i - 2]\n      const row4 = children[i - 1]\n      const row5 = children[i]\n      if (\n        row1.classList.contains('row') &&\n        row2.classList.contains('row') &&\n        row3.classList.contains('row') &&\n        row4.classList.contains('hidden-md') &&\n        row5.classList.contains('hidden-xs')\n      ) {\n        // we found our block\n        newNode = document.createElement('div')\n        newNode.classList.add('lot')\n        children.splice(i - 4, 5, newNode)\n        newNode.append(row1, row2, row3)\n        i = i - 4\n      }\n    }\n    // replace lotlist children with new list\n    lotList.replaceChildren(...children)\n    lots = Array.from(document.querySelectorAll<HTMLDivElement>('div.lot'))\n  }\n\n  const lotList = document.querySelector<HTMLDivElement>('div.lot-list')\n  let lots: HTMLDivElement[] = []\n  const prevLink = document.querySelector<HTMLLIElement>('li.previous a')\n  const nextLink = document.querySelector<HTMLLIElement>('li.next a')\n  const helpTopics: HelpTopic[] = [\n    { section: '', items: [{ key: '?', description: 'Keyboard shortcuts' }] },\n    {\n      section: 'Auction items',\n      items: [\n        { key: 'j', description: 'Scroll to next auction item' },\n        { key: 'k', description: 'Scroll to previous auction item' },\n      ],\n    },\n    {\n      section: 'Selected item',\n      items: [\n        { key: 'w', description: 'Add item to watchlist' },\n        { key: 'v', description: 'Open item in a new tab' },\n      ],\n    },\n  ]\n  let index = 0\n\n  window.addEventListener('keydown', event => {\n    if (event.code === 'KeyJ') {\n      indexAction('plus')\n    }\n    if (event.code === 'KeyK') {\n      indexAction('minus')\n    }\n    if (event.code === 'KeyW') {\n      addToWatchList()\n    }\n    if (event.code === 'KeyV') {\n      openInNewTab()\n    }\n    if (event.code === 'Slash' && event.shiftKey) {\n      showHelp()\n    }\n    if (event.code === 'Escape') {\n      hideHelp()\n    }\n  })\n}\nEquipBidKeyboardNavigation.initScript()\n"],
  "mappings": "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",
  "names": ["EquipBidKeyboardNavigation", "lotList"]
}
