{
  "version": 3,
  "sources": ["../../src/main/wirecutter-anti-modal/wirecutter-anti-modal.user.ts"],
  "sourcesContent": ["// keep track of actions so we can disable observer at some point\nlet modalRemoved = false;\nlet overflowFixed = false;\n\nconst config: MutationObserverInit = {\n  attributes: true,\n  childList: true,\n  subtree: true,\n};\n\nconst elementToObserve = document.querySelector<HTMLBodyElement>('body');\n\nconst removePaywallModal = (mutation: MutationRecord): void => {\n  if (!modalRemoved && mutation.type === 'childList') {\n    mutation.addedNodes.forEach(item => {\n      const element = item as Element;\n      if (element.id === 'modal-portal-regiwall') {\n        element.remove();\n        modalRemoved = true;\n      }\n    });\n  }\n};\n\nconst removeScrollLock = (mutation: MutationRecord): void => {\n  if (!overflowFixed && mutation.type === 'attributes' && mutation.attributeName === 'class') {\n    const element = mutation.target as Element;\n    if (element.tagName === 'BODY') {\n      element.className = '';\n      overflowFixed = true;\n    }\n  }\n};\n\nconst startObserver = (): void => {\n  const callback: MutationCallback = (mutationsList, observer) => {\n    mutationsList.forEach(mutation => {\n      removePaywallModal(mutation);\n      removeScrollLock(mutation);\n      // if we've fixed the issues, stop observing\n      if (modalRemoved && overflowFixed) {\n        observer.disconnect();\n      }\n    });\n  };\n\n  // Create an observer instance linked to the callback function and start observing the target node for configured mutations\n  if (elementToObserve) {\n    new MutationObserver(callback).observe(elementToObserve, config);\n  }\n};\n\nstartObserver();\n"],
  "mappings": ";;;AACA,MAAI,eAAe;AACnB,MAAI,gBAAgB;AAEpB,MAAM,SAA+B;AAAA,IACnC,YAAY;AAAA,IACZ,WAAW;AAAA,IACX,SAAS;AAAA,EACX;AAEA,MAAM,mBAAmB,SAAS,cAA+B,MAAM;AAEvE,MAAM,qBAAqB,CAAC,aAAmC;AAC7D,QAAI,CAAC,gBAAgB,SAAS,SAAS,aAAa;AAClD,eAAS,WAAW,QAAQ,UAAQ;AAClC,cAAM,UAAU;AAChB,YAAI,QAAQ,OAAO,yBAAyB;AAC1C,kBAAQ,OAAO;AACf,yBAAe;AAAA,QACjB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAEA,MAAM,mBAAmB,CAAC,aAAmC;AAC3D,QAAI,CAAC,iBAAiB,SAAS,SAAS,gBAAgB,SAAS,kBAAkB,SAAS;AAC1F,YAAM,UAAU,SAAS;AACzB,UAAI,QAAQ,YAAY,QAAQ;AAC9B,gBAAQ,YAAY;AACpB,wBAAgB;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAEA,MAAM,gBAAgB,MAAY;AAChC,UAAM,WAA6B,CAAC,eAAe,aAAa;AAC9D,oBAAc,QAAQ,cAAY;AAChC,2BAAmB,QAAQ;AAC3B,yBAAiB,QAAQ;AAEzB,YAAI,gBAAgB,eAAe;AACjC,mBAAS,WAAW;AAAA,QACtB;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,kBAAkB;AACpB,UAAI,iBAAiB,QAAQ,EAAE,QAAQ,kBAAkB,MAAM;AAAA,IACjE;AAAA,EACF;AAEA,gBAAc;",
  "names": []
}
