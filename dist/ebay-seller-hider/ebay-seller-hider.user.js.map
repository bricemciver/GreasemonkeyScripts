{
  "version": 3,
  "sources": ["../../src/main/ebay-seller-hider/ebay-seller-hider.user.ts"],
  "sourcesContent": ["namespace EbaySellerHider {\n  let filterReviews = true;\n  let reviewMin = 10;\n  let filterFeedback = true;\n  let feedbackMin = 95.0;\n  let hideSponsored = true;\n  let sponsorClass = '';\n\n  const hideItem = (seller: HTMLElement): void => {\n    const itemRegExp = RegExp(/\\((.*)\\) (.*)%/).exec(seller.innerText);\n    if (itemRegExp) {\n      const [, reviews, feedback] = itemRegExp;\n\n      const reviewsNum = parseInt(reviews.replace(',', ''), 10);\n      const feedbackNum = parseFloat(feedback);\n      let parent = seller.parentElement;\n      while (parent && parent.tagName !== 'LI') {\n        parent = parent.parentElement;\n      }\n      if (parent) {\n        parent.style.display =\n          (filterReviews && reviewsNum < reviewMin) || (filterFeedback && feedbackNum < feedbackMin) ? 'none' : 'list-item';\n        // don't bother looking for sponsored posts if already hidden\n        if (hideSponsored && parent.style.display === 'list-item') {\n          let hideSponsoredPost = false;\n          const sponsoredSpan = Array.from(parent.querySelectorAll('span')).find(item => item.textContent === 'Sponsored');\n          if (sponsoredSpan) {\n            const labelAttr = sponsoredSpan.parentElement?.parentElement?.getAttribute('aria-labelledBy');\n            if (labelAttr && labelAttr === sponsorClass) {\n              hideSponsoredPost = true;\n            }\n          }\n          parent.style.display = hideSponsoredPost ? 'none' : 'list-item';\n        }\n      }\n    }\n  };\n\n  const createHeader = (): HTMLDivElement => {\n    const header = document.createElement('div');\n    const headerTitle = document.createElement('h3');\n    headerTitle.classList.add('x-refine__item');\n    headerTitle.textContent = 'Sellers';\n    header.append(headerTitle);\n    return header;\n  };\n\n  const createCheckboxEventListener = (valueName: string, checkbox: HTMLInputElement): void => {\n    if (valueName === 'reviewMin') {\n      localStorage.setItem('filterReviews', checkbox.checked ? 'true' : 'false');\n      updateFilter();\n    }\n    if (valueName === 'feedbackMin') {\n      localStorage.setItem('filterFeedback', checkbox.checked ? 'true' : 'false');\n      updateFilter();\n    }\n    if (valueName === 'hideSponsored') {\n      localStorage.setItem('hideSponsored', checkbox.checked ? 'true' : 'false');\n      updateFilter();\n    }\n  };\n\n  const createCheckbox = (text: string, valueName: string): HTMLInputElement => {\n    const checkbox = document.createElement('input');\n    checkbox.type = 'checkbox';\n    checkbox.ariaLabel = text;\n    checkbox.classList.add('cbx', 'x-refine__multi-select-checkbox');\n    checkbox.autocomplete = 'off';\n    checkbox.ariaHidden = 'true';\n    checkbox.tabIndex = -1;\n    checkbox.role = 'presentation';\n    if (\n      (valueName === 'reviewMin' && filterReviews) ||\n      (valueName === 'feedbackMin' && filterFeedback) ||\n      (valueName === 'hideSponsored' && hideSponsored)\n    ) {\n      checkbox.setAttribute('checked', 'true');\n    }\n    checkbox.addEventListener('input', () => createCheckboxEventListener(valueName, checkbox));\n    return checkbox;\n  };\n\n  const createListItem = (text: string, valueName: string, value?: string): HTMLLIElement => {\n    const listItem = document.createElement('li');\n    listItem.classList.add('x-refine__main__list--value');\n    const selectItem = document.createElement('div');\n    selectItem.classList.add('x-refine__multi-select');\n    const checkbox = createCheckbox(text, valueName);\n    const checkboxText = document.createElement('span');\n    checkboxText.classList.add('cbx', 'x-refine__multi-select-cbx');\n    checkboxText.innerText = text;\n    if (value) {\n      const input = document.createElement('input');\n      input.type = 'text';\n      input.pattern = 'd*';\n      input.value = value;\n      input.addEventListener('change', evt => {\n        const target = evt.target as HTMLInputElement | null;\n        if (target) {\n          localStorage.setItem(valueName, target.value);\n          updateFilter();\n        }\n      });\n      input.style.height = '22px';\n      input.style.width = '50px';\n      input.style.margin = '-3px 0 0 8px';\n      input.style.padding = '3px';\n      input.style.float = 'right';\n      input.style.fontSize = '11px';\n\n      checkboxText.append(input);\n    }\n    selectItem.append(checkbox);\n    selectItem.append(checkboxText);\n    listItem.append(selectItem);\n    return listItem;\n  };\n\n  const createGroup = (): HTMLDivElement => {\n    const group = document.createElement('div');\n    group.classList.add('x-refine__group');\n    const listHeader = document.createElement('ul');\n    listHeader.classList.add('x-refine__main__value');\n    listHeader.style.clear = 'both';\n    listHeader.append(createListItem('# of Reviews over ', 'reviewMin', reviewMin.toString()));\n    listHeader.append(createListItem('Feedback over ', 'feedbackMin', feedbackMin.toString()));\n    listHeader.append(createListItem('Hide sponsored', 'hideSponsored'));\n    group.append(listHeader);\n    return group;\n  };\n\n  export const getPresets = (): void => {\n    filterReviews = localStorage.getItem('filterReviews') !== 'false';\n    reviewMin = parseInt(localStorage.getItem('reviewMin') ?? '10', 10);\n    filterFeedback = localStorage.getItem('filterFeedback') !== 'false';\n    feedbackMin = parseFloat(localStorage.getItem('feedbackMin') ?? '95.0');\n    hideSponsored = localStorage.getItem('hideSponsored') !== 'false';\n  };\n\n  export const addFilter = (): void => {\n    const menu = document.querySelector('.x-refine__left__nav');\n    if (menu) {\n      const list = document.createElement('li');\n      list.classList.add('x-refine__main__list');\n      list.append(createHeader());\n      list.append(createGroup());\n      menu.prepend(list);\n    }\n  };\n\n  export const updateFilter = (): void => {\n    getPresets();\n    const sellers = document.querySelectorAll('span.s-item__seller-info-text');\n    for (const seller of Array.from(sellers)) {\n      hideItem(seller as HTMLElement);\n    }\n  };\n\n  export const findSponsoredClass = (): void => {\n    // get inserted style\n    const styleBlock = Array.from(document.head.getElementsByTagName('style')).find(item => item.type === 'text/css');\n    if (styleBlock) {\n      const cssRuleList = styleBlock.sheet?.cssRules;\n      if (cssRuleList) {\n        const rule = Array.from(cssRuleList).find(item => item.cssText.includes('inline') && item.cssText.includes('span.'));\n        if (rule) {\n          const regex = /\\.([a-zA-Z0-9_-]+)\\s*\\{/;\n          const match = regex.exec(rule.cssText);\n          if (match) {\n            sponsorClass = match[1];\n          }\n        }\n      }\n    }\n  };\n}\nEbaySellerHider.getPresets();\nEbaySellerHider.addFilter();\nEbaySellerHider.updateFilter();\nEbaySellerHider.findSponsoredClass();\n"],
  "mappings": "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",
  "names": ["EbaySellerHider"]
}
