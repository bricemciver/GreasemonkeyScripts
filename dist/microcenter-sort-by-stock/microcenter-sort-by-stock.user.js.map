{
  "version": 3,
  "sources": ["../../src/main/microcenter-sort-by-stock/microcenter-sort-by-stock.user.ts"],
  "sourcesContent": ["namespace MicrocenterSortByStock {\n  export const addOptionToMenu = () => {\n    // find the menu\n    const menu = document.querySelector<HTMLUListElement>('div.searchActions > div.sorting ul.dropdown-menu');\n    if (menu) {\n      // grab the first entry as a reference\n      const firstEntry = menu.querySelector<HTMLAnchorElement>('li a');\n      // create the new entry\n      const stockSort = document.createElement('li');\n      stockSort.classList.add('dropdown-itemLI');\n      const stockSortLink = document.createElement('a');\n      stockSortLink.classList.add('dropdown-item');\n      // create the href based on the first entry\n      if (firstEntry?.href.includes('sortby')) {\n        const sortByIndex = firstEntry.href.indexOf('sortby');\n        stockSortLink.href = `${firstEntry.href.substring(0, sortByIndex)}sortby=stock`;\n      } else {\n        stockSortLink.href = `${firstEntry?.href}&sortby=stock`;\n      }\n      stockSortLink.textContent = 'Stock';\n      stockSort.appendChild(stockSortLink);\n      menu.appendChild(stockSort);\n    }\n  };\n\n  export const isSortByStock = () => {\n    return window.location.search.includes('sortby=stock');\n  };\n\n  export const sortByStock = () => {\n    // Show \"Stock\" as the selected item in the sort by list\n    const selectedItem = document.querySelector<HTMLSpanElement>('span.sortByText');\n    if (selectedItem) {\n      selectedItem.textContent = 'Stock';\n    }\n    // Get all of the entries on the page\n    const entries = document.querySelectorAll<HTMLLIElement>('li.product_wrapper');\n    // Sort the entries\n    const sortedEntries = Array.from(entries).sort(stockSortFunc);\n    // Replace the existing list with the new one\n    const menu = document.querySelector<HTMLUListElement>('#productGrid > ul');\n    menu?.replaceChildren(...sortedEntries);\n  };\n\n  const stockSortFunc = (entry1: HTMLLIElement, entry2: HTMLLIElement) => {\n    let entry1Stock = 0;\n    let entry2Stock = 0;\n    // Get the stock from each entry\n    let entry1StockLi = entry1.querySelector<HTMLSpanElement>('span.inventoryCnt')?.textContent;\n    if (entry1StockLi) {\n      entry1StockLi = entry1StockLi.replace(' IN STOCK', '');\n      entry1Stock = entry1StockLi.includes('25+') ? 26 : Number.parseInt(entry1StockLi);\n    }\n    // Get the stock from each entry\n    let entry2StockLi = entry2.querySelector<HTMLSpanElement>('span.inventoryCnt')?.textContent;\n    if (entry2StockLi) {\n      entry2StockLi = entry2StockLi.replace(' IN STOCK', '');\n      entry2Stock = entry2StockLi.includes('25+') ? 26 : Number.parseInt(entry2StockLi);\n    }\n    return entry2Stock - entry1Stock;\n  };\n}\nMicrocenterSortByStock.addOptionToMenu();\nif (MicrocenterSortByStock.isSortByStock()) {\n  MicrocenterSortByStock.sortByStock();\n}\n"],
  "mappings": ";;;;AAAA,MAAU;AAAV,IAAUA,4BAAV;AACS,IAAMA,wBAAA,kBAAkB,MAAM;AAEnC,YAAM,OAAO,SAAS,cAAgC,kDAAkD;AACxG,UAAI,MAAM;AAER,cAAM,aAAa,KAAK,cAAiC,MAAM;AAE/D,cAAM,YAAY,SAAS,cAAc,IAAI;AAC7C,kBAAU,UAAU,IAAI,iBAAiB;AACzC,cAAM,gBAAgB,SAAS,cAAc,GAAG;AAChD,sBAAc,UAAU,IAAI,eAAe;AAE3C,YAAI,yCAAY,KAAK,SAAS,WAAW;AACvC,gBAAM,cAAc,WAAW,KAAK,QAAQ,QAAQ;AACpD,wBAAc,OAAO,GAAG,WAAW,KAAK,UAAU,GAAG,WAAW,CAAC;AAAA,QACnE,OAAO;AACL,wBAAc,OAAO,GAAG,yCAAY,IAAI;AAAA,QAC1C;AACA,sBAAc,cAAc;AAC5B,kBAAU,YAAY,aAAa;AACnC,aAAK,YAAY,SAAS;AAAA,MAC5B;AAAA,IACF;AAEO,IAAMA,wBAAA,gBAAgB,MAAM;AACjC,aAAO,OAAO,SAAS,OAAO,SAAS,cAAc;AAAA,IACvD;AAEO,IAAMA,wBAAA,cAAc,MAAM;AAE/B,YAAM,eAAe,SAAS,cAA+B,iBAAiB;AAC9E,UAAI,cAAc;AAChB,qBAAa,cAAc;AAAA,MAC7B;AAEA,YAAM,UAAU,SAAS,iBAAgC,oBAAoB;AAE7E,YAAM,gBAAgB,MAAM,KAAK,OAAO,EAAE,KAAK,aAAa;AAE5D,YAAM,OAAO,SAAS,cAAgC,mBAAmB;AACzE,mCAAM,gBAAgB,GAAG;AAAA,IAC3B;AAEA,UAAM,gBAAgB,CAAC,QAAuB,WAA0B;AA5C1E;AA6CI,UAAI,cAAc;AAClB,UAAI,cAAc;AAElB,UAAI,iBAAgB,YAAO,cAA+B,mBAAmB,MAAzD,mBAA4D;AAChF,UAAI,eAAe;AACjB,wBAAgB,cAAc,QAAQ,aAAa,EAAE;AACrD,sBAAc,cAAc,SAAS,KAAK,IAAI,KAAK,OAAO,SAAS,aAAa;AAAA,MAClF;AAEA,UAAI,iBAAgB,YAAO,cAA+B,mBAAmB,MAAzD,mBAA4D;AAChF,UAAI,eAAe;AACjB,wBAAgB,cAAc,QAAQ,aAAa,EAAE;AACrD,sBAAc,cAAc,SAAS,KAAK,IAAI,KAAK,OAAO,SAAS,aAAa;AAAA,MAClF;AACA,aAAO,cAAc;AAAA,IACvB;AAAA,KA5DQ;AA8DV,yBAAuB,gBAAgB;AACvC,MAAI,uBAAuB,cAAc,GAAG;AAC1C,2BAAuB,YAAY;AAAA,EACrC;",
  "names": ["MicrocenterSortByStock"]
}
