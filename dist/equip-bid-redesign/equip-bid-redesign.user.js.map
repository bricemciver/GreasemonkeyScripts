{
  "version": 3,
  "sources": ["../../src/main/equip-bid-redesign/equip-bid-redesign.user.ts"],
  "sourcesContent": ["namespace EquipBidRedesign {\n  let currentIndex = 0\n\n  export const addFocusStyling = () => {\n    const styleEl = document.createElement('style')\n    document.head.appendChild(styleEl)\n    styleEl.sheet?.insertRule('li.list-group-item.focused{outline: Highlight auto 1px; outline:-webkit-focus-ring-color auto 1px;}')\n  }\n\n  const retrieveNextPage = (href: string) => {\n    // fetch the next page\n    fetch(href)\n      .then(response => response.text())\n      .then(data => {\n        const parser = new DOMParser()\n        const doc = parser.parseFromString(data, 'text/html')\n        const entries = doc.querySelectorAll<HTMLDivElement>('div.lot-divider')\n        if (!entries.length) return\n\n        const listGroup = document.querySelector<HTMLUListElement>('div.lot-list > ul.list-group')\n        if (!listGroup) return\n\n        entries.forEach(entry => {\n          const listGroupItem = document.createElement('li')\n          listGroupItem.classList.add('list-group-item')\n          if (entry.previousElementSibling?.previousElementSibling?.previousElementSibling) {\n            listGroupItem.appendChild(entry.previousElementSibling?.previousElementSibling?.previousElementSibling)\n          }\n          if (entry.previousElementSibling?.previousElementSibling) {\n            listGroupItem.appendChild(entry.previousElementSibling?.previousElementSibling)\n          }\n          if (entry.previousElementSibling) {\n            listGroupItem.appendChild(entry.previousElementSibling)\n          }\n          entry.nextElementSibling?.remove()\n          entry.remove()\n          listGroup.appendChild(listGroupItem)\n        })\n\n        keyboardNavigation()\n      })\n  }\n\n  // Add keyboard navigation\n  const keyboardNavigation = () => {\n    const listGroup = document.querySelector<HTMLUListElement>('div.lot-list > ul.list-group')\n    if (!listGroup) return\n\n    const listGroupItems = Array.from(listGroup.querySelectorAll<HTMLLIElement>('li.list-group-item'))\n    // get next link\n    const next = document.querySelector<HTMLAnchorElement>('li.next > a')\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'k') {\n        event.preventDefault()\n        // clear previous focused tag\n        listGroupItems[currentIndex].classList.remove('focused')\n        currentIndex = currentIndex - 1\n        if (currentIndex < 0) {\n          currentIndex = 0\n        } else {\n          // scroll into view\n          listGroupItems[currentIndex].scrollIntoView({ block: 'center' })\n          // focus next tag\n          listGroupItems[currentIndex].classList.add('focused')\n        }\n      }\n      if (event.key === 'j') {\n        event.preventDefault()\n        // clear previous focused tag\n        listGroupItems[currentIndex].classList.remove('focused')\n        currentIndex = currentIndex + 1\n        if (currentIndex >= listGroupItems.length) {\n          if (next) {\n            retrieveNextPage(next.href)\n          } else {\n            currentIndex = listGroupItems.length - 1\n          }\n        } else {\n          // scroll into view\n          listGroupItems[currentIndex].scrollIntoView({ block: 'center' })\n          // focus next tag\n          listGroupItems[currentIndex].classList.add('focused')\n        }\n      }\n    }\n\n    document.documentElement.addEventListener('keydown', handleKeyDown)\n    // scroll into view\n    listGroupItems[currentIndex].scrollIntoView({ block: 'center' })\n    // focus next tag\n    listGroupItems[currentIndex].classList.add('focused')\n  }\n\n  export const processEntries = () => {\n    const entries = document.querySelectorAll<HTMLDivElement>('div.lot-divider')\n    if (!entries.length) return\n\n    const listGroup = document.createElement('ul')\n    listGroup.classList.add('list-group')\n    entries.forEach(entry => {\n      const listGroupItem = document.createElement('li')\n      listGroupItem.classList.add('list-group-item')\n      if (entry.previousElementSibling?.previousElementSibling?.previousElementSibling) {\n        listGroupItem.appendChild(entry.previousElementSibling?.previousElementSibling?.previousElementSibling)\n      }\n      if (entry.previousElementSibling?.previousElementSibling) {\n        listGroupItem.appendChild(entry.previousElementSibling?.previousElementSibling)\n      }\n      if (entry.previousElementSibling) {\n        listGroupItem.appendChild(entry.previousElementSibling)\n      }\n      entry.nextElementSibling?.remove()\n      entry.remove()\n      listGroup.appendChild(listGroupItem)\n    })\n\n    const lotList = document.querySelector<HTMLDivElement>('div.lot-list > hr')\n    if (!lotList) return\n\n    lotList.insertAdjacentElement('afterend', listGroup)\n\n    keyboardNavigation()\n  }\n}\nEquipBidRedesign.addFocusStyling()\nEquipBidRedesign.processEntries()\n"],
  "mappings": "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",
  "names": ["EquipBidRedesign"]
}
